#!/usr/bin/env php
<?php

declare(strict_types=1);

use Symfony\Component\Console\Application;

require_once $_composer_autoload_path ?? __DIR__ . '/../vendor/autoload.php';

$application = new Application();

try {
    $application->setName('Transformers PHP CLI');

    // TODO: remove when upgrading to Symfony 8.0 where `addCommand` will be the only option
    $addCommandMethodName = method_exists($application, 'addCommand') ? 'addCommand' : 'add';
    $application->$addCommandMethodName(new Codewithkyrian\Transformers\Commands\DownloadModelCommand());

    $application->run();
} catch (Exception $e) {
    echo $e->getMessage();
    exit(1);
}
